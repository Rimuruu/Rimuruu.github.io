import{S as t,i as o,s as e,e as i,c as s,t as n,a as r,b as h,f as a,n as l,d as c,o as f,g as u}from"./main-6eb4426a.js";function d(t){let o,e,f,u,d,p,v,y,m,T;return{c(){o=i("div"),e=i("div"),f=i("canvas"),u=s(),d=i("div"),p=i("h1"),v=n("Score :"),y=i("a"),y.textContent="0",m=s(),T=i("h2"),T.innerHTML="Controle:<br> Z=ROTATE<br> S=DOWN<br> Q=LEFT<br> D=RIGHT",r(f,"id","frame"),r(f,"width","400"),r(f,"height","800"),r(e,"id","tetris"),r(y,"id","score"),r(p,"class","text-dark"),r(T,"class","text-dark"),r(T,"id","tetrist"),r(d,"id","help"),r(d,"class","svelte-mlsbvo"),r(o,"class","d-flex d-inline-block"),r(o,"id","wrap")},m(i,s){h(i,o,s),a(o,e),a(e,f),t[2](f),a(o,u),a(o,d),a(d,p),a(p,v),a(p,y),t[3](y),a(d,m),a(d,T)},p:l,i:l,o:l,d(e){e&&c(o),t[2](null),t[3](null)}}}const p="#2f1a4a";function v(t,o,e){const i=[[[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],"red"],[[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],"green"],[[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],"yellow"],[[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],"blue"],[[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],"purple"],[[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],"cyan"],[[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],"orange"]];var s,n,r,h=[];let a,l,c;for(a=0;a<20;a++)for(h[a]=[],l=0;l<10;l++)h[a][l]=p;function d(t,o,e){r.fillStyle=e,r.fillRect(40*t,40*o,40,40),r.strokeStyle="#8361b0",r.strokeRect(40*t,40*o,40,40)}function v(){for(a=0;a<20;a++)for(l=0;l<10;l++)d(l,a,h[a][l])}function y(){let t=i[(o=0,e=7,o=Math.ceil(o),e=Math.floor(e),Math.floor(Math.random()*(e-o))+o)];var o,e;return new g(t[0],t[1])}let m=y(),T=0;function g(t,o){this.tetro=t,this.color=o,this.state=0,this.activeTetro=this.tetro[this.state],this.x=3,this.y=-2}g.prototype.draw=function(t){for(a=0;a<this.activeTetro.length;a++)for(l=0;l<this.activeTetro.length;l++)this.activeTetro[a][l]&&d(this.x+l,this.y+a,t)},g.prototype.in=function(){this.draw(this.color)},g.prototype.out=function(){this.draw(p)},g.prototype.moveDown=function(){this.collision(0,1,this.activeTetro)?(this.lock(),m=y()):(this.out(),this.y++,this.in())},g.prototype.moveRight=function(){this.collision(1,0,this.activeTetro)||(this.out(),this.x++,this.in())},g.prototype.moveLeft=function(){this.collision(-1,0,this.activeTetro)||(this.out(),this.x--,this.in())},g.prototype.rotate=function(){let t=this.tetro[(this.state+1)%this.tetro.length],o=0;this.collision(0,0,t)&&(o=this.x>5?-1:1),this.collision(o,0,t)||(this.out(),this.x+=o,this.state=(this.state+1)%this.tetro.length,this.activeTetro=this.tetro[this.state],this.in())},g.prototype.lock=function(){for(a=0;a<this.activeTetro.length;a++)for(l=0;l<this.activeTetro.length;l++)if(this.activeTetro[a][l]){if(this.y+a<0){alert("Game Over"),w=!0,b();break}h[this.y+a][this.x+l]=this.color}for(a=0;a<20;a++){let t=!0;for(l=0;l<10;l++)t=t&&h[a][l]!=p;if(t){for(c=a;c>1;c--)for(l=0;l<10;l++)h[c][l]=h[c-1][l];for(l=0;l<10;l++)h[0][l]=p;T+=10}}v(),e(1,n.innerHTML=" "+T+" ",n)},g.prototype.collision=function(t,o,e){for(a=0;a<e.length;a++)for(l=0;l<e.length;l++){if(!e[a][l])continue;let i=this.x+l+t,s=this.y+a+o;if(i<0||i>=10||s>=20)return!0;if(!(s<=0)&&h[s][i]!=p)return!0}return!1},document.addEventListener("keydown",(function(t){81==t.keyCode?m.moveLeft():90==t.keyCode?m.rotate():68==t.keyCode?m.moveRight():83==t.keyCode&&m.moveDown()}));let x=Date.now(),w=!1;function k(){Date.now()-x>1e3&&(m.moveDown(),x=Date.now()),w||requestAnimationFrame(k)}function b(){for(a=0;a<20;a++){for(h[a]=[],l=0;l<10;l++)h[a][l]=p;m=y(),w=!1,T=0,e(1,n.innerHTML=" "+T+" ",n)}}return f(()=>{r=s.getContext("2d"),v(),k()}),[s,n,function(t){u[t?"unshift":"push"](()=>{e(0,s=t)})},function(t){u[t?"unshift":"push"](()=>{e(1,n=t)})}]}export default class extends t{constructor(t){super(),o(this,t,v,d,e,{})}}
//# sourceMappingURL=Tetris-24ff0ecc.js.map
